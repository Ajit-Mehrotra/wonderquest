(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(e,n,t){},28:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),s=t(7),c=t.n(s),d=t(8),o=t(30),r=t(31),l=t(15),b=t(33),p=t(34),j=t(32),h=t(35),f=t(11),g=(t(20),t(1));var u=function(){const[e,n]=Object(a.useState)({"Priority Backlog":[],Today:[],"Done Done":[]}),[t,i]=Object(a.useState)(!0);return Object(a.useEffect)((()=>{fetch("https://api.airtable.com/v0/appVXFJJlBFs4nDeq/Design%20Projects?filterByFormula=OR(%7BStatus%7D='Priority%20Backlog',%7BStatus%7D='Today',%7BStatus%7D='Done%20Done')&sort%5B0%5D%5Bfield%5D=Ranking%20Final&sort%5B0%5D%5Bdirection%5D=desc",{headers:{Authorization:"Bearer patCRuvQNJDTr3dWj.a91f0bad66dc0006062fafebee44d99d20233350c1bc9cbfedcf70eab3283b44"}}).then((e=>{if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()})).then((e=>{const t={"Priority Backlog":[],Today:[],"Done Done":[]};e.records.forEach((e=>{const n={id:e.id,fields:{Name:e.fields.Name,Notes:e.fields.Notes||"",Size:e.fields.Size,"Ranking Final":e.fields["Ranking Final"],Value:e.fields.Value,Urgency:e.fields.Urgency},showDescription:!1};t[e.fields.Status]&&t[e.fields.Status].push(n)})),n(t)}))}),[]),Object(g.jsx)(d.a,{onDragEnd:t=>{const{destination:a,source:i,draggableId:s}=t;if(!a)return;if(a.droppableId===i.droppableId&&a.index===i.index)return;const c=e[i.droppableId],d=e[a.droppableId],o=c.splice(i.index,1)[0];if(a.droppableId===i.droppableId){let e;d.splice(a.index,0,o),e=0===a.index?d[1].fields["Ranking Final"]+1:a.index===d.length-1?d[d.length-2].fields["Ranking Final"]-1:(d[a.index-1].fields["Ranking Final"]+d[a.index+1].fields["Ranking Final"])/2,o.fields["Ranking Manual"]=e,fetch("https://api.airtable.com/v0/appVXFJJlBFs4nDeq/Design%20Projects/".concat(s),{method:"PATCH",headers:{Authorization:"Bearer patCRuvQNJDTr3dWj.a91f0bad66dc0006062fafebee44d99d20233350c1bc9cbfedcf70eab3283b44","Content-Type":"application/json"},body:JSON.stringify({fields:{"Ranking Manual":e}})}).then((e=>e.json())).then((e=>console.log(e))).catch((e=>console.error(e)))}else{d.splice(a.index,0,o);const e="Done"===a.droppableId?"Done Done":a.droppableId;fetch("https://api.airtable.com/v0/appVXFJJlBFs4nDeq/Design%20Projects/".concat(s),{method:"PATCH",headers:{Authorization:"Bearer patCRuvQNJDTr3dWj.a91f0bad66dc0006062fafebee44d99d20233350c1bc9cbfedcf70eab3283b44","Content-Type":"application/json"},body:JSON.stringify({fields:{Status:e}})}).then((e=>e.json())).then((e=>console.log(e))).catch((e=>console.error(e)))}n({...e,[i.droppableId]:c,[a.droppableId]:d});const r="Done"===a.droppableId?"Done Done":a.droppableId;fetch("https://api.airtable.com/v0/appVXFJJlBFs4nDeq/Design%20Projects/".concat(s),{method:"PATCH",headers:{Authorization:"Bearer patCRuvQNJDTr3dWj.a91f0bad66dc0006062fafebee44d99d20233350c1bc9cbfedcf70eab3283b44","Content-Type":"application/json"},body:JSON.stringify({fields:{Status:r}})}).then((e=>e.json())).then((e=>console.log(e))).catch((e=>console.error(e)))},children:Object(g.jsx)(o.a,{children:Object(g.jsx)(r.a,{children:Object.entries(e).map(((e,a)=>{let[s,c]=e;return Object(g.jsxs)(l.a,{md:4,children:[Object(g.jsx)("h2",{children:Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s,"Done Done"===s&&Object(g.jsx)(b.a.Check,{type:"switch",id:"done-done-toggle",label:"",checked:t,onChange:()=>i(!t)})]})}),Object(g.jsx)(d.c,{droppableId:s,children:e=>Object(g.jsxs)("div",{ref:e.innerRef,...e.droppableProps,children:[c.map(((e,a)=>("Done Done"!==s||t)&&Object(g.jsx)(d.b,{draggableId:e.id,index:a,children:t=>Object(g.jsx)(p.a,{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:Object(g.jsxs)(p.a.Body,{children:[Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(g.jsx)(p.a.Title,{children:e.fields.Name}),Object(g.jsxs)("div",{children:[Object(g.jsx)(j.a,{pill:!0,className:"size-badge",children:e.fields.Size}),Object(g.jsx)(h.a,{variant:"link",onClick:()=>{return t=e.id,void n((e=>{const n={...e};for(let a in n)n[a]=n[a].map((e=>e.id===t?{...e,showDescription:!e.showDescription}:e));return n}));var t},children:e.showDescription?Object(g.jsx)(f.a,{}):Object(g.jsx)(f.b,{})})]})]}),e.showDescription&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(p.a.Text,{children:e.fields.Notes}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{className:"badge-label",children:"Urgency: "}),Object(g.jsx)(j.a,{pill:!0,className:"urgency-badge",children:e.fields.Urgency})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{className:"badge-label",children:"Value: "}),Object(g.jsx)(j.a,{pill:!0,className:"value-badge",children:e.fields.Value})]})]})]})})},e.id))),e.placeholder]})})]},s)}))})})})};t(27);c.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(u,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.5c2ddb87.chunk.js.map